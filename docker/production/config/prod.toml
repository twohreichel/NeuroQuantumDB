# NeuroQuantumDB Production Configuration (Docker)
# ⚠️  CRITICAL: Review and customize all values before deployment!
# Last Updated: January 2026
#
# Environment variables override these settings:
#   NEUROQUANTUM_HOST, NEUROQUANTUM_PORT, NEUROQUANTUM_JWT_SECRET,
#   NEUROQUANTUM_REDIS_URL, NEUROQUANTUM_LOG_LEVEL, NEUROQUANTUM_RATE_LIMIT

[server]
host = "0.0.0.0"  # Bind to all interfaces (required for Docker)
port = 8080
workers = 4  # Adjust based on container CPU limits
max_connections = 10000
keep_alive = 75
client_timeout = 5000
client_shutdown = 5000

[database]
data_path = "/var/lib/neuroquantumdb/data"  # Docker volume mount point
max_connections = 500
connection_timeout_seconds = 30

[jwt]
# ⚠️  SECURITY CRITICAL: Override via NEUROQUANTUM_JWT_SECRET environment variable!
secret = "REPLACE_ME_WITH_SECURE_SECRET_VIA_ENV_VAR"
expiration_hours = 1
refresh_threshold_minutes = 15
quantum_enabled = true
algorithm = "HS256"
issuer = "neuroquantum-db"
audience = "neuroquantum-api"

# JWT Secret Key Rotation
rotation_enabled = true
rotation_interval_days = 90
rotation_grace_period_hours = 24

[rate_limit]
requests_per_hour = 10000
burst_allowance = 100
enabled = true
strategy = "TokenBucket"

[cors]
# ⚠️  Update with your actual frontend domain(s)
allowed_origins = ["https://app.neuroquantumdb.com", "https://dashboard.neuroquantumdb.com"]
allowed_methods = ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
allowed_headers = ["Authorization", "Content-Type", "X-API-Key", "X-Request-ID", "X-Quantum-Level"]
expose_headers = ["X-RateLimit-Limit", "X-RateLimit-Remaining", "X-RateLimit-Reset", "X-Request-ID"]
max_age = 3600
allow_credentials = true

[security]
max_payload_size = 5242880  # 5MB
request_timeout_seconds = 60
security_headers = true
csrf_protection = false
quantum_encryption = true
admin_ip_whitelist = ["127.0.0.1", "::1"]

[security.circuit_breaker]
failure_threshold = 10
success_threshold = 5
timeout_seconds = 120
enabled = true

[monitoring]
metrics_enabled = true
prometheus_endpoint = "/metrics"
health_check_endpoint = "/health"
performance_stats = true
detailed_logging = false
websocket_enabled = true

[logging]
level = "info"
format = "Json"
file_path = "/var/log/neuroquantumdb/api.log"
max_file_size_mb = 100
max_files = 10
structured_logging = true

[tracing]
enabled = true
exporter = "otlp"
endpoint = "http://jaeger:4317"  # Docker service name
sampling_rate = 0.1
service_name = "neuroquantumdb-prod"
trace_level = "minimal"
