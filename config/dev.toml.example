# NeuroQuantumDB Development Configuration
# Optimized for local development with debug capabilities

[server]
host = "127.0.0.1"
port = 8080
workers = 2  # Reduced for dev - fewer CPU cores needed
max_connections = 1000  # Lower limit for dev environment
keep_alive = 75
client_timeout = 5000
client_shutdown = 5000

[database]
data_path = "./neuroquantum_data"
max_connections = 50  # Reduced for dev
connection_timeout_seconds = 30

# Buffer Pool Configuration
[buffer_pool]
pool_size = 1000  # Number of page frames in buffer pool
eviction_policy = "LRU"  # Options: "LRU" or "Clock"
enable_background_flush = true
flush_interval_seconds = 5
max_dirty_pages = 100

# Read-Ahead Prefetching Configuration
prefetch_enabled = true  # Enable adaptive prefetching for sequential scans
prefetch_depth = 8  # Number of pages to prefetch ahead (recommended: 4-16)
prefetch_threshold = 3  # Sequential accesses needed before prefetching starts

[jwt]
# DEV SECRET - DO NOT USE IN PRODUCTION!
secret = "dev_secret_key_min_32_chars_1234567890abcdef"
expiration_hours = 24  # Longer expiration for dev convenience
refresh_threshold_minutes = 60
quantum_enabled = false  # Disabled for faster dev iterations
algorithm = "HS256"
issuer = "neuroquantum-db"
audience = "neuroquantum-api"

# JWT Secret Key Rotation (disabled in dev for convenience)
rotation_enabled = false  # Set to true to test rotation in dev
rotation_interval_days = 7  # Shorter interval for testing (7 days)
rotation_grace_period_hours = 2  # Shorter grace period for testing

[rate_limit]
requests_per_hour = 100000  # Very high limit for dev testing
burst_allowance = 1000
enabled = false  # Disabled for easier dev testing
strategy = "TokenBucket"

[cors]
allowed_origins = ["http://localhost:3000", "http://localhost:8080", "http://127.0.0.1:3000"]
allowed_methods = ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
allowed_headers = ["Authorization", "Content-Type", "X-API-Key", "X-Request-ID", "X-Quantum-Level"]
expose_headers = ["X-RateLimit-Limit", "X-RateLimit-Remaining", "X-RateLimit-Reset", "X-Request-ID"]
max_age = 3600
allow_credentials = true

[security]
max_payload_size = 16777216  # 16MB - larger for dev testing
request_timeout_seconds = 120  # Longer timeout for debugging
security_headers = true
csrf_protection = false
quantum_encryption = false  # Disabled for faster dev
admin_ip_whitelist = ["127.0.0.1", "::1"]

[security.circuit_breaker]
failure_threshold = 50  # Higher threshold for dev
success_threshold = 5
timeout_seconds = 60
enabled = false  # Disabled for easier dev debugging

[monitoring]
metrics_enabled = true
prometheus_endpoint = "/metrics"
health_check_endpoint = "/health"
performance_stats = true
detailed_logging = true  # Enable detailed logs for dev
websocket_enabled = true

[logging]
level = "debug"  # Debug level for development
format = "Plain"  # Plain text easier to read during dev
max_file_size_mb = 100
max_files = 3  # Fewer log files in dev
structured_logging = false  # Plain logs for dev

# Quantum Computing Configuration (Optional)
[quantum.annealing]
# Backend preference: "auto", "dwave", "braket", or "classical"
backend = "auto"

# D-Wave Quantum Annealer Configuration
[quantum.annealing.dwave]
# API token from D-Wave Leap account (or set DWAVE_API_TOKEN env var)
# api_token = "${DWAVE_API_TOKEN}"
api_endpoint = "https://cloud.dwavesys.com/sapi/v2"
# solver = "Advantage_system6.4"  # Optional: specify solver
num_reads = 1000
annealing_time_us = 20
auto_scale = true
timeout_secs = 300

# AWS Braket Annealer Configuration
[quantum.annealing.braket]
# AWS credentials via environment variables (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
region = "us-west-1"
device_arn = "arn:aws:braket:::device/qpu/d-wave/Advantage_system6"
num_shots = 1000
s3_bucket = "amazon-braket-results"
s3_prefix = "neuroquantum-tfim"
timeout_secs = 300

# Gate-Based Quantum Computing Configuration
[quantum.gate]
# Backend preference: "auto", "ibm", "ionq", "braket", or "simulator"
backend = "auto"

# IBM Quantum Configuration
[quantum.gate.ibm]
# API token from IBM Quantum Experience (or set IBM_QUANTUM_API_KEY env var)
# api_token = "${IBM_QUANTUM_API_KEY}"
api_endpoint = "https://api.quantum.ibm.com/runtime"
backend_name = "ibm_brisbane"  # Options: ibm_brisbane, ibm_kyoto, ibmq_qasm_simulator
num_shots = 1024
error_mitigation = true
dynamic_decoupling = true
max_qubits = 127  # IBM Eagle processor
timeout_secs = 300

# IonQ Configuration
[quantum.gate.ionq]
# API key from IonQ Cloud (or set IONQ_API_KEY env var)
# api_key = "${IONQ_API_KEY}"
api_endpoint = "https://api.ionq.co/v0.3"
target = "simulator"  # Options: aria, forte, simulator
num_shots = 1024
error_mitigation = 1  # 0=none, 1=debias, 2=full
native_gates = false  # Use native IonQ gates (GPi, GPi2, MS)
timeout_secs = 300

# AWS Braket Gate-Based Configuration
[quantum.gate.braket]
# AWS credentials via environment variables
region = "us-east-1"
# Device options:
# - IonQ Aria: "arn:aws:braket:us-east-1::device/qpu/ionq/Aria-1"
# - Rigetti: "arn:aws:braket:us-west-1::device/qpu/rigetti/Aspen-M-3"
# - Simulator: "arn:aws:braket:::device/quantum-simulator/amazon/sv1"
device_arn = "arn:aws:braket:::device/quantum-simulator/amazon/sv1"
num_shots = 1024
s3_bucket = "amazon-braket-results"
s3_prefix = "neuroquantum-gate"
timeout_secs = 300
